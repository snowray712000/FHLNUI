(function(root,undefined){function loadJsOrCssSync(e){/.js$/i.test(e)?(loadJsSync(e,!1),$("head").append($("<script>",{src:e}))):/.css$/i.test(e)?$("head").append($("<link>",{rel:"stylesheet",type:"text/css",href:e})):/.ico$/i.test(e)&&$("head").append($("<link>",{href:e,rel:"shortcut icon",type:"image/x-icon"}))}function loadCssSync(e){function n(e){var n=$("<style></style>");n.html(e),$("head").append(n)}$.ajax({url:e,dataType:"text",async:!1,cache:!0,success:n})}function loadJsSync(url,isCache){isCache=isCache!=undefined&&isCache,isCache?$.ajax({url:url,dataType:"text",async:!1,cache:!0,success:function(str){function aaa(){eval(str)}aaa.call(window)}}):$.ajax({url:url,dataType:"script",async:!1})}function exportModule(){"function"==typeof define&&define.amd?define("Ijnjs",[],function(){return Ijnjs}):"undefined"!=typeof module&&module.exports?module.exports=Ijnjs:root.Ijnjs=Ijnjs}function loadJsAsync(e){return Enumerable.from(e).select(generateOnePromise).toArray()}function generateOnePromise(a1){function fnPromise(resolve,reject){function success(strCode){function evalExec(){var fn=function(){eval(strCode)};fn.call(re)}function isOkay(){return 0!=Object.keys(re).length}function getResult(){return re[Object.keys(re)[0]]}var re={};evalExec(),Ijnjs.testThenDo(()=>{a1.cb(getResult()),resolve()},e=>isOkay())}$.ajax({url:srd+a1.path,dataType:"text",cache:!1,async:a1.async,success:success})}var srd=getServerRootDirectory();return new Promise(fnPromise)}function loadCss(e){var n=getServerRootDirectory();Enumerable.from(e).forEach(e=>{function t(e){var n=$("<style></style>");n.html(e),$("head").append(n)}$.ajax({url:n+e,dataType:"text",cache:!1,success:t})})}function waitThenSetReadyAsync(e){Promise.all(e).then(()=>{function e(){var e=Enumerable.from(Object.keys(Ijnjs)),n=Enumerable.from(["SplitStringByRegex","DialogBase","BibleVersionDialog"]).all(n=>e.contains(n));Ijnjs.assert(n)}e(),_isReady=!0})}function getLinqEnumerable(){return void 0===Enumerable&&"function"==typeof require?require("linq"):window.Enumerable}function getServerRootDirectory(){function e(){return 5500==location.port}function n(){return 4200==location.port}function t(){return"/NUI/ijnjs/"}function s(){return"/ijnjs/"}function o(){return"https://raw.githubusercontent.com/snowray712000/ijnjs/main/"}return e()?s():n()?o():t()}function TestTime(e){e=e!=undefined&&e;var n=new Date;this.log=function(t,s){if(0!=e){s=s==undefined||s;var o=new Date,a=o-n;console.log(t+" "+a+" ms."),s&&(n=o)}}}function assert(e,n){function t(){return n!=undefined?n:"function"==typeof e?"assert "+e.toString():"assert fail."}if("function"==typeof e){if(0==e())throw Error(t())}else if("boolean"==typeof e&&0==e)throw Error(t())}function testThenDo(e,n,t){function s(){o(Ijnjs)?e():(console.log("wait"),setTimeout(()=>{a()},t))}t=t==undefined?333:t;var o=n!==undefined?n:Ijnjs.isReady,a=s;s()}function rem2Px(e){function n(){Ijnjs.testThenDo(()=>{t=parseFloat($("body").css("font-size"))},()=>0!=$("body").length,50)}var t;return t==undefined?(n(),16*e):t*e}console.log((new Error).fileName),console.log(window.document.scripts);var Enumerable=getLinqEnumerable(),Ijnjs=function(){};Ijnjs.TestTime=TestTime;var dt=new TestTime(!1),_isReady=!1;Ijnjs.isReady=(()=>0!=_isReady),Ijnjs.testThenDo=testThenDo,Ijnjs.assert=assert,Ijnjs.rem2Px=rem2Px,Ijnjs.isLessMidWindow=(()=>$(window).width()<Ijnjs.rem2Px(36)),Ijnjs.getSrd=function(e){var n=Ijnjs.Path.getDirectoryName(location.pathname),t=0;for(let e=0;e<n.length;e++)"/"==n[e]&&t++;return 2==t?"../"+e+"/":1==t?e+"/":"NUII/"+e+"/"},Ijnjs.appendObjectTo=function(e,n){for(var t in e)n[t]=e[t]},generateOnePromise({path:"path.js",cb:function(e){Ijnjs.Path=e,dt.log("至 path ",!1),console.log(78)},async:!1}),Ijnjs.loadJsSync=loadJsSync,Ijnjs.loadCssSync=loadCssSync,Ijnjs.loadJsOrCssSync=loadJsOrCssSync,Ijnjs.loadJsInIIFEModel=function(path,isCache,isAsync){return new Promise((res,rej)=>{Ijnjs.testThenDo(()=>{function cb(strCode){var fn=function(){eval(strCode)},re={};fn.call(re),Ijnjs.testThenDo(()=>{res(re)},e=>0!=Object.keys(re).length)}var srd=Ijnjs.Path.getDirectoryName(location.pathname)+"/",settings={url:srd+path,dataType:"text",success:cb};isCache!=undefined&&(settings.cache=isCache),isAsync!=undefined&&(settings.async=isAsync),$.ajax(settings)},e=>Ijnjs.Path!=undefined)})};var csses=["ijn-dialog-base.css","bible-version-dialog-picker.css"];loadCss(csses);var deps=[{path:"SplitStringByRegex.js",cb:function(e){Ijnjs.SplitStringByRegex=e,dt.log("至 SplitStringByRegex ",!1)}},{path:"ijn-dialog-base.js",cb:function(e){Ijnjs.DialogBase=e,dt.log("至 DialogBase ",!1)}},{path:"bible-version-dialog-picker.js",cb:function(e){Ijnjs.BibleVersionDialog=e,dt.log("至 BibleVersionDialog ",!1)}}],ajaxs=loadJsAsync(deps);waitThenSetReadyAsync(ajaxs),exportModule()})(this);