(function(r){function i(r){function t(){function i(i){var n=0,t=e.from(r).skip(i).indexOf(r=>(r.isOrderStart&&null==r.children?n++:r.isOrderEnd&&n--,0==n));return-1==t?t:t-1}function n(i){var n=0,t=e.from(r).skip(i).indexOf(r=>(r.isListStart&&null==r.children?n++:r.isListEnd&&n--,0==n));return t}function t(i,n){-1==n?(r[i].children=e.from(r).skip(i+1).toArray(),r.splice(i+1)):(r[i].children=e.from(r).skip(i+1).take(n-2).toArray(),r.splice(i+1,n))}for(;;){var s=e.from(r).indexOf(r=>r.isOrderStart&&null==r.children);if(-1!=s){var a=i(s);t(s,a)}else{if(s=e.from(r).indexOf(r=>r.isListStart&&null==r.children),-1==s)break;a=n(s);t(s,a)}}}t();var s=n();return e.from(r).select(r=>{if(1==r.isBr)return n("<br/>");if(1==r.isHr)return n("<hr/>");if(r.children){var e=i(r.children);if("ul"==r.tpContain||1==r.isOrderStart)return n("<ul>").append(e);if("li"==r.tpContain||1==r.isListStart)return n("<li>").append(e)}var t=n("<span>",{text:r.w});return(r.sn||r.refDescription)&&t.data("data",r),r.sn&&t.addClass("sn"),r.refDescription&&t.addClass("ref"),t}).forEach(r=>s=s.add(r)),s}var n=window.$,e=window.Enumerable;testThenDoAsync().then(()=>{n=Ijnjs.Libs.s.libs.$,e=Ijnjs.Libs.s.libs.Enumerable}),r.generateDTextDom=i})(this);