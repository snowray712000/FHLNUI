(n=>{function a(){function n(){var n=$("#ijn-dialogs");return 0==n.length&&($("body").append($('<div id="ijn-dialogs"></div>')),n=$("#ijn-dialogs")),n}return new Promise((a,c)=>{$(()=>{var c=n();if(0==$("#bible-version-dialog").length){var r=$("<div/>"),o=e()+"BibleVersionDialogfrm.html";r.load(o+" #bible-version-dialog"),r.appendTo(c)}t(()=>{a()},()=>0!=$("#bible-version-dialog").length)})})}function c(){function n(n,a,c){function r(){e()?n():(console.log("wait"+n.name),setTimeout(()=>{t()},c))}c=null==c?333:c;var e=void 0!==a?a:()=>!0,t=r;r()}return null==window.Ijnjs||null==window.Ijnjs.testThenDo?n:window.Ijnjs.testThenDo}function r(){return n==window?()=>"../ijnjs-fhl/":"function"==typeof n&&"FHL"==n.name&&"function"==typeof n.getSrdIjnjsFhl?n.getSrdIjnjsFhl:()=>"../ijnjs-fhl/"}var e=r(),t=c();a().then(n=>{o()});var o=()=>{function a(){this.id="bible-version-dialog"}function c(){function n(){h.empty(),i.langs.map(n=>{var a=$("<span />",{class:"btn btn-outline-dark lang-item",text:n.cna});return a.data("data",{na:n.na,cna:n.cna}),a}).forEach(n=>{n.appendTo(h)})}function a(){y.empty(),i.chSubs.map(n=>{var a=$("<span>",{class:"btn btn-outline-info ch-sub-item",text:n.cna}).data("data",n.na);return a}).forEach(n=>{n.appendTo(y);var a=n.data("data");i.chSubBr.includes(a)&&y.append($("<br/>"))})}function c(){v.empty(),i.langs.map(n=>{var a=$("<div />",{class:"group "+n.na});return a.data("lang",n.na),n.vers.map(n=>{var a=$("<span/>",{text:n.cna,class:"book-item btn btn-outline-success"}).data("data",n);return a}).forEach(n=>{a.append(n)}),a}).forEach(n=>{v.append(n)})}n(),a(),c()}function r(){function n(n,a){function c(){$("<span>",{class:"btn btn-outline-primary",text:n.cna}).data("data",n).data("dom$",$(a)).appendTo(d)}function r(){var a=Enumerable.from(l.children("span")).firstOrDefault(a=>$(a).data("data").na==n.na);null!=a&&$(a).remove()}c(),r()}function a(n,a){function c(){var a=Enumerable.from(d.children("span")).firstOrDefault(a=>$(a).data("data").na==n.na);null!=a&&$(a).remove()}function r(){$("<span>",{class:"btn btn-outline-secondary btn-sm",text:n.cna}).data("data",n).data("dom$",$(a)).prependTo(l),l.children(":gt(10)").remove()}c(),r()}function c(){function n(n){for(var c of[0,1,2])c==n?a.eq(c).addClass("active"):a.eq(c).removeClass("active")}var a=y.children("span"),c=a.filter(":gt(2)");a.eq(0).on("click",function(){var r=$(this).hasClass("active");if(1!=r){for(var e of(n(0),[3,4,5,10]))a.eq(e).addClass("active");c.show(),p.trigger("change")}}),a.eq(1).on("click",function(){var a=$(this).hasClass("active");1!=a&&(n(1),c.hide(),p.trigger("change"))}),a.eq(2).on("click",function(){var a=$(this).hasClass("active");1!=a&&(n(2),c.hide(),p.trigger("change"))}),c.on("click",function(){$(this).toggleClass("active"),p.trigger("change")})}function r(){function n(){var n=[];for(var a of y.children(".active"))n.push($(a).data("data"));return n}v.children(".ch").children().hide();var a=n();for(var c of v.children(".ch").children()){var r=$(c);function e(){var n=r.data("data").cds;for(var c of n)if(0==a.includes(c))return!1;return!0}e()?r.show():r.hide()}}h.find(".lang-item").on("click",function(){var n=$(this),a=n.hasClass("active");if(!a){h.children().removeClass("active"),n.addClass("active");var c=n.data("data").na;for(var r of("ch"==c?u.show():u.hide(),v.children()))c!=$(r).data("lang")?$(r).hide():$(r).show();"ch"==c&&p.trigger("change")}}),c(),p.on("change",function(){var n=$(this).is(":checked");n?(y.show(),r()):(y.hide(),v.children(".ch").children().show())}),d.children(".group-help").on("click",function(){Enumerable.from(d.children("span")).reverse().select(n=>$(n).data("dom$")).forEach(n=>n.trigger("click"))}),l.children(".group-help").on("click",function(){l.children("span").remove()}),f.children(".group-help").on("click",function(){f.children("span").remove()}),d.on({click:function(){$(this).data("dom$").trigger("click")}},"span"),l.on({click:function(){$(this).data("dom$").trigger("click")}},"span"),f.on({click:function(){var n=$(this);Enumerable.from(d.children("span")).reverse().forEach(n=>$(n).trigger("click")),Enumerable.from(n.data("dom$")).forEach(n=>n.trigger("click"))}},"span"),v.on({click:function(){var c=$(this);c.toggleClass("active");var r=c.data("data");c.hasClass("active")?n(r,this):a(r,this)}},".book-item")}function e(){function n(){function n(){for(let c=0;c<r.length;c++){var n=r[c];if(n.length==a.length&&Enumerable.range(0,n.length).all(c=>n[c]==a[c]))return c}return-1}var c=n();-1!=c&&r.splice(c,1),r.unshift(a),r.length>10&&r.pop()}var a=Enumerable.from(d.children("span")).select(n=>$(n).data("data").na).toArray(),c=Enumerable.from(l.children("span")).select(n=>$(n).data("data").na).toArray(),r=Enumerable.from(f.children("span")).select(n=>Enumerable.from($(n).data("data")).select(n=>n.na).toArray()).toArray();return n(),{selects:a,offens:c,sets:r}}function o(){function n(n){function c(){var n=Enumerable.from(e).select(n=>n.cna).toArray(),a=Enumerable.from(n).select(n=>n.substr(0,2)).toArray().join(",");return"("+n.length+")"+a}var r=a(n),e=Enumerable.from(r).select(n=>n.data("data")).toArray(),t=c(),o=Enumerable.from(e).select(n=>n.cna).toArray().join(",");$("<span>",{text:t,class:"btn btn-outline-secondary btn-sm","data-toggle":"tooltip","data-placement":"top",title:o}).data("data",e).data("dom$",r).tooltip().appendTo(f)}function a(n){function c(){Enumerable.from(n).where(n=>null==r.get(n)).toArray().forEach(n=>{var a=$("<span>",{text:n,class:"book-item btn btn-outline-success"}).data("data",{na:n,cna:n}).appendTo(v.children(".ot"));r.add(n,a)})}null==a.prototype.dicts&&(a.prototype.dicts=Enumerable.from(e).toDictionary(n=>$(n).data("data").na,n=>$(n)));var r=a.prototype.dicts;return c(),Enumerable.from(n).select(n=>r.get(n)).where(n=>null!=n)}function c(){return s.data("args")}var r=c();d.children("span").remove(),l.children("span").remove(),f.children("span").remove();var e=v.find(".book-item");e.removeClass("active"),a(r.selects).forEach(n=>n.trigger("click")),a(r.offens).reverse().forEach(n=>{$(n).trigger("click"),$(n).trigger("click")}),r.sets.forEach(n)}var i={langs:[{na:"ch",cna:"中文",od:1,vers:[{na:"cbol",cna:"原文直譯(參考用)",cds:["yrnow","pr","officer"]},{na:"tcv2019",cna:"現代中文譯本2019版",yr:2019,cds:["yrnow","pr","officer"]},{na:"cccbst",cna:"聖經公會四福音書共同譯本",yr:2015,cds:["yrnow","pr","officer"]},{na:"cnet",cna:"NET聖經中譯本",yr:2011,cds:["yrnow","pr","study"]},{na:"rcuv",cna:"和合本2010",yr:2010,cds:["yrnow","pr","officer"]},{na:"csb",cna:"中文標準譯本",yr:2008,cds:["yrnow","pr","officer"]},{na:"recover",cna:"恢復本",yr:2003,cds:["yrnow","pr","officer"]},{na:"tcv95",cna:"現代中文譯本1995版",yr:1995,cds:["yrnow","pr","officer"]},{na:"ncv",cna:"新譯本",yr:1992,cds:["yrnow","pr","officer"]},{na:"lcc",cna:"呂振中譯本",yr:1970,cds:["yrnow","pr","officer","officer"]},{na:"ofm",cna:"思高譯本",yr:1968,cds:["yrnow","cc","officer"]},{na:"cwang",cna:"王元德官話譯本",yr:1933,cds:["pr","yr1960","officer"]},{na:"cumv",cna:"官話和合本",yr:1919,cds:["pr","yr1960","officer"]},{na:"unv",cna:"和合本",yr:1911,cds:["pr","yr1919","officer"]},{na:"orthdox",cna:"俄羅斯正教文理譯本",yr:1910,cds:["ro","yr1919","ccht"],cna2:"東正教譯本新約與詩篇"},{na:"cuwv",cna:"文理和合本",yr:1907,cds:["pr","yr1919","ccht"]},{na:"wlunv",cna:"深文理和合本",yr:1906,cds:["pr","yr1960","ccht"]},{na:"cuwve",cna:"淺文理和合本",yr:1906,cds:["pr","yr1919","ccht"]},{na:"ssewb",cna:"施約瑟淺文理譯本",yr:1902,cds:["pr","yr1919","ccht"]},{na:"pmb",cna:"北京官話譯本",yr:1878,cds:["pr","yr1919","officer"]},{na:"deanwb",cna:"粦為仁譯本",yr:1870,cds:["pr","yr1919","ccht"]},{na:"hudsonwb",cna:"胡德邁譯本",yr:1867,cds:["pr","yr1919","ccht"]},{na:"wdv",cna:"文理委辦譯本",yr:1854,cds:["pr","yr1919","ccht"]},{na:"goddwb",cna:"高德譯本",yr:1853,cds:["pr","yr1919","ccht"]},{na:"nt1864",cna:"新遺詔聖經",yr:1840,cds:["pr","yr1850","ccht"]},{na:"mormil",cna:"神天聖書",yr:1823,cds:["pr","yr1850","ccht"]},{na:"marwb",cna:"馬殊曼譯本",yr:1822,cds:["pr","yr1850","ccht"]},{na:"basset",cna:"白日昇徐約翰文理譯本",yr:1707,cds:["pr","yr1800","ccht"]},{na:"cmxuhsb",cna:"徐匯官話新譯福音",yr:1948,cds:["pr","yr1960","officer"]},{na:"cwangdmm",cna:"王多默聖史宗徒行實",yr:1875,cds:["pr","yr1919","ccht"]},{na:"cwhsiaosb",cna:"蕭舜華官話",yr:1949,cds:["pr","yr1960","officer"]},{na:"cwmgbm",cna:"四人小組譯本",yr:1837,cds:["pr","1837","ccht"]},{na:"cwfaubsb",cna:"聖保祿書翰並數位宗徒涵牘",yr:0,cds:["cc"]},{na:"cwjdsb",cna:"德如瑟四史聖經譯註",yr:0,cds:["\bcc"]},{na:"cwkfag",cna:"郭實臘新遺詔書和舊遺詔聖書",yr:1838,cds:["pr","yr1850","ccht"]},{na:"cwliwysb",cna:"宗徒大事錄和新經譯義",yr:1875,cds:["pr","yr1919","ccht"]},{na:"cwmxb",cna:"馬相伯救世福音",yr:1937,cds:["pr","yr1919","ccht"]},{na:"cwont",cna:"俄羅斯正教新遺詔聖經",yr:0,cds:["ro"]},{na:"cwplbsb",cna:"卜士傑新經公函與默示錄",yr:0,cds:["cc"]},{na:"cwtaiping",cna:"太平天國文理譯本",yr:1853,cds:["pr","yr1919","ccht"]},{na:"cwwuchsb",cna:"吳經熊新經全集聖詠譯義",yr:1946,cds:["pr","yr1960","ccht"]},{na:"cxubinwsb",cna:"許彬文四史全編",yr:1899,cds:["pr","yr1919","ccht"]},{na:"cogorw",cna:"高連茨基聖詠經",yr:0,cds:["ro"]},{na:"cogorw",cna:"高連茨基聖詠經",yr:0,cds:["ro"]}]},{na:"en",cna:"英文",od:3,vers:[{na:"kjv",yr:1611,cna:"KJV",od:1},{na:"darby",yr:1890,cna:"Darby",od:3},{na:"bbe",yr:1965,cna:"BBE",od:5},{na:"erv",yr:1987,cna:"ERV",od:7},{na:"asv",yr:1901,cna:"ASV",od:9},{na:"web",yr:2e3,cna:"WEB",od:11},{na:"esv",yr:2001,cna:"ESV",od:13}]},{na:"hg",cna:"希伯來、希臘",od:5,vers:[{na:"bhs",cna:"舊約馬索拉原文",od:1},{na:"fhlwh",cna:"新約原文",od:3},{na:"lxx",cna:"七十士譯本",od:5}]},{na:"fo",cna:"其它外語",od:7,vers:[{na:"vietnamese",od:1,cna:"越南聖經"},{na:"russian",od:3,cna:"俄文聖經"},{na:"korean",od:5,cna:"韓文聖經"},{na:"jp",od:7,cna:"日語聖經"}]},{na:"mi",cna:"台語",od:9,vers:[{na:"tte",od:1,cna:"聖經公會現代臺語全羅"},{na:"ttvh",od:3,cna:"聖經公會現代臺語漢字"},{na:"apskcl",od:9,cna:"紅皮聖經全羅"},{na:"apskhl",od:11,cna:"紅皮聖經漢羅"},{na:"bklcl",od:13,cna:"巴克禮全羅"},{na:"bklhl",od:15,cna:"巴克禮漢羅"},{na:"tghg",od:17,cna:"聖經公會巴克禮台漢本"},{na:"prebklcl",od:19,cna:"馬雅各全羅"},{na:"sgebklcl",od:23,cna:"全民台語聖經全羅"},{na:"sgebklhl",od:25,cna:"全民台語聖經漢羅"}]},{na:"ha",cna:"客語",od:10,vers:[{na:"thv2e",od:5,cna:"聖經公會現代客語全羅"},{na:"thv12h",od:7,cna:"聖經公會現代客語漢字"},{na:"hakka",od:21,cna:"汕頭客語聖經"}]},{na:"in",cna:"台灣原著民語",od:11,vers:[{na:"rukai",od:1,cna:"聖經公會魯凱語聖經"},{na:"tsou",od:3,cna:"聖經公會鄒語聖經"},{na:"ams",od:5,cna:"聖經公會阿美語1997"},{na:"amis2",od:7,cna:"聖經公會阿美語2019"},{na:"ttnt94",od:9,cna:"聖經公會達悟語新約聖經"},{na:"sed",od:11,cna:"賽德克語"},{na:"tru",od:13,cna:"聖經公會太魯閣語聖經"}]},{na:"ot",cna:"其它",od:13,vers:[{na:"tibet",od:1,cna:"藏語聖經"}]}],chSubs:[{na:"pr",cna:"基督新教"},{na:"cc",cna:"羅馬天主教"},{na:"ro",cna:"俄羅斯正教"},{na:"officer",cna:"官話(白話文)"},{na:"ccht",cna:"文理(文言文)"},{na:"study",cna:"研讀本"},{na:"yr1800",cna:"1800前"},{na:"yr1850",cna:"1800-50"},{na:"yr1919",cna:"1850-1918"},{na:"yr1960",cna:"1919-60"},{na:"yrnow",cna:"近代"}],chSubBr:["ro","study"]},s=$("#bible-version-dialog"),d=s.find(".selecteds"),l=s.find(".offens"),f=s.find(".sets"),h=s.find(".lang"),u=s.find(".ch-subs"),p=u.find("#flexCheckDefault"),y=s.find(".ch-sub"),v=s.find(".vers"),b=n=>{console.log(n)},g=n=>b=n,m=n=>{},w=n=>m=n,k=n=>{t(()=>{function a(){var a=v.children(".ot"),c=Enumerable.from(v.find(".book-item")).toDictionary(n=>$(n).data("data").na,n=>$(n));Enumerable.from(n).forEach(n=>{var r=c.get(n.na);if(null!=r){var e=r.data("data");e.cna=n.cna,r.data("data",e).text(n.cna)}else $("<span>",{text:n.cna,class:"book-item btn btn-outline-success"}).data("data",{na:n.na,cna:n.cna}).appendTo(a)})}a()},()=>0!=v.find(".book-item").length)},E=n=>{function a(){function a(n){var a=[];for(var c of n)a.push(c);return a}var c={selects:["unv"],offens:["cbol","esv"],sets:[["unv","kjv","esv","cbol"],["unv","esv"]]};null==n&&(n={}),null==n.selects&&(n.selects=a(c.selects)),null==n.offens&&(n.offens=a(c.offens)),null==n.sets&&(n.sets=a(c.sets))}a(),s.data("args",n),s.dialog("open"),m({dom$:s})};c(),r(),h.find(".lang-item").eq(0).trigger("click"),y.children().eq(0).trigger("click"),s.dialog({autoOpen:!1,modal:!0,position:{my:"center top",at:"center top"},closeOnEscape:!0,close:function(){var n=e();b(n)},open:function(){function n(){setTimeout(()=>{var n=$(window).height(),a=$(window).width();s.dialog("option","height",.95*n),s.dialog("option","width",.95*a)},0)}n(),o(),m()}}),a.prototype.setCallbackClosed=g,a.prototype.setCallbackOpened=w,a.prototype.open=E,a.prototype.setVersionsFromApi=k,a.s=new a,n.BibieVersionDialog=a}})(this);