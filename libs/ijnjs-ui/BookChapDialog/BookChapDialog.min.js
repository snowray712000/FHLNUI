(function(t){function n(t,n){Ijnjs.testThenDo(()=>{t.call(n)},()=>0!=$("#book-chap-dialog").length)}function i(){function t(){function t(){var t=$("#ijn-dialogs");return 0==t.length&&($("body").append($('<div id="ijn-dialogs"></div>')),t=$("#ijn-dialogs")),t}return new Promise((i,o)=>{$(()=>{function o(){return Ijnjs.getSrd("ijnjs-fhl")}var e=t(),a=$("<div></div>"),r=o()+"BookChapDialogfrm.html";a.load(r+" #book-chap-dialog"),a.appendTo(e),n(()=>{s=$("#book-chap-dialog"),c=s.find(".contents"),i()},this)})})}function e(){n(()=>{s.dialog({autoOpen:!1,modal:!0,position:{my:"center top",at:"center top"},open:r})},this)}function a(){$(window).on("resize",_.debounce(function(t){if(t.target==window){var n=$(window),i=n.height(),o=n.width();s.dialog("option","maxHeight",.95*i),s.dialog("option","height",.95*i),s.dialog("option","maxWidth",.95*o),s.dialog("option","width",.95*o)}},200))}function r(){function t(){s.data("args",E)}function n(){setTimeout(()=>{function t(){var t=$("#mainWindow");return 0==t.length&&(t=$(window)),{cx:t.width(),cy:t.height()}}var n=t();s.dialog("option","maxHeight",1*n.cy),s.dialog("option","height",1*n.cy),s.dialog("option","maxWidth",.9*n.cx),s.dialog("option","width",.9*n.cx)},0)}function e(){var t=B();$(t[0]).off("click").on("click",function(){$(this).trigger("focus"),E.isHebrewOrder=!1,p=$(this),b().gOldTestmentItems(d().book)}),$(t[1]).off("click").on("click",function(){$(this).trigger("focus"),p=$(this),b().gNewTestmentItems(d().book)}),$(t[3]).off("click").on("click",function(){$(this).trigger("focus"),E.isHebrewOrder=!0,p=$(this),b().gOldTestmentHebrewOrderItems(d().book)}),$(t[2]).off("click").on("click",function(){$(this).trigger("focus"),p=$(this);var t=d();h(t.book,t.chap)}),$(t[4]).off("click").on("click",function(){function t(){n.hasClass("active")?(n.removeClass("active"),E.isFullname=!1):(n.addClass("active"),E.isFullname=!0)}var n=$(this);t(),p.trigger("click")})}function a(){return o.BOOK_WHERE_1CHAP.includes(d().book)}function r(){function t(){var t=E.book;return t>39?B().eq(1):E.isHebrewOrder?B().eq(3):B().eq(0)}a()?t().trigger("click"):B().eq(2).trigger("click")}function l(){var t=u();f(t.book),g(t.chap)}function u(){return s.data("args")||{}}function d(){return s.data("result")||{}}function f(t){var n=d();n.book=t,s.data("result",n)}function g(t){var n=d();n.chap=t,s.data("result",n)}function h(t,n){c.empty();for(var i=o.getCountChapOfBook(t),e=0;e<i;++e){var a=$('<button type="button" class="btn btn-outline-dark"></button>'),r=e+1;a.text(r),a.data("val",r),r==n&&a.addClass("active"),a.one("click",function(){var t=$(this).data("val");g(t),O()}),a.appendTo(c)}}function O(){t(),s.dialog("close"),i.s.cbHided()}function b(){function t(){return E.isGb?E.isFullname?o.CHINESE_BOOK_NAMES_GB:o.CHINESE_BOOK_ABBREVIATIONS_GB:E.isFullname?o.CHINESE_BOOK_NAMES:o.CHINESE_BOOK_ABBREVIATIONS}function n(){a()?(g(1),O()):B().eq(2).trigger("click")}function i(t,n,i){var o=$('<button type="button" class="btn btn-outline-dark" tabindex="-1"></button>');return o.text(t),o.data("val",n),n==i&&o.addClass("active"),o.one("click",e),o}function e(){var t=$(this).data("val");f(t),n()}function r(n){c.empty();for(var e=t(),a=o.gHebrewOrder(),r=0;r<39;r++){var s=a[r],l=e[s-1],u=i(l,s,n);u.appendTo(c)}}function s(n){c.empty();for(var o=t(),e=0;e<39;e++){var a=e+1,r=o[a-1],s=i(r,a,n);s.appendTo(c)}}function l(n){c.empty();for(var o=t(),e=0;e<27;e++){var a=e+40,r=o[a-1],s=i(r,a,n);s.appendTo(c)}}return{gNewTestmentItems:l,gOldTestmentItems:s,gOldTestmentHebrewOrderItems:r}}function B(){return s.find(".toolbar").children()}n();var p,E=u();l(),e(),E.isFullname&&B().eq(4).addClass("active"),r(),i.s.cbShowed()}var s=$(),c=$();this.cbShowed=(()=>{}),this.cbHided=(()=>{}),this.show=(t=>{n(()=>{function n(){var n=i();null==t&&(t={});for(const i of["isFullname","isHebrewOrder","book","chap","isGb"])null==t[i]&&(t[i]=n[i])}function i(){var t=s.data("args")||{};return null==t.book&&(t.book=1),null==t.chap&&(t.chap=1),null==t.isFullname&&(t.isFullname=!1),null==t.isGb&&(t.isGb=!1),null==t.isHebrewOrder&&(t.isHebrewOrder=!1),t}n(),s.data("args",t),s.dialog("open")},this)}),this.setCBHided=(t=>{this.cbHided=t}),this.setCBShowed=(t=>{this.cbShowed=t}),this.getArgs=(()=>s.data("args")),this.getResult=(()=>s.data("result")),t().then(()=>{e(),a()})}Ijnjs.assert("FHL"==t.name);var o={get CHINESE_BOOK_NAMES(){return FHL.BibleConstant.s.CHINESE_BOOK_NAMES},get CHINESE_BOOK_NAMES_GB(){return FHL.BibleConstant.s.CHINESE_BOOK_NAMES_GB},get CHINESE_BOOK_ABBREVIATIONS(){return FHL.BibleConstant.s.CHINESE_BOOK_ABBREVIATIONS},get CHINESE_BOOK_ABBREVIATIONS_GB(){return FHL.BibleConstant.s.CHINESE_BOOK_ABBREVIATIONS_GB},get BOOK_WHERE_1CHAP(){return FHL.BibleConstant.s.BOOK_WHERE_1CHAP},getCountChapOfBook:FHL.getCountChapOfBook,gHebrewOrder:()=>FHL.BibleConstant.s.ORDER_OF_HEBREW};i.s=new i,t.BookChapDialog=i})(this);